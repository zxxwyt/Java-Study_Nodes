# 多表查询(基础)
这是MySQL比较难学的部分，接下来我会带着大家通过直观的学习
接下来我们通过黑马程序员的MySQL教程中的实例来学习
：https://www.bilibili.com/video/BV1Kr4y1i7ru

## 📘 目录
1. [我们要用到的表格](#我们要用到的表格)
2. [多表查询的本质](#多表查询的本质)
3. [内连接](#内连接)
4. [外连接](#外连接)
5. [自连接](#自连接)
6. [联合查询（UNION）](#联合查询union)
7. [子查询](#子查询)
   - [① 标量子查询](#标量子查询)
   - [② 列子查询](#列子查询)
   - [③ 行子查询](#行子查询)
   - [④ 表子查询](#表子查询)
8. [总结](#总结)

---



 ## 我们要用到的表格
 ### 员工表：emp
| id | name   | age | job           | salary | entrydate   | managerid | dept_id |
|----|--------|-----|----------------|---------|--------------|------------|----------|
| 1  | 金庸   | 66  | 总裁          | 20000  | 2000-01-01   | NULL       | 5        |
| 2  | 张无忌 | 20  | 项目经理      | 12500  | 2005-12-05   | 1          | 1        |
| 3  | 杨逍   | 33  | 开发          | 8400   | 2000-11-03   | 2          | 1        |
| 4  | 韦一笑 | 48  | 开发          | 11000  | 2002-02-05   | 2          | 1        |
| 5  | 常遇春 | 43  | 开发          | 10500  | 2004-09-07   | 3          | 1        |
| 6  | 小昭   | 19  | 程序员鼓励师  | 6600   | 2004-10-12   | 2          | 1        |
| 7  | 灭绝   | 60  | 财务总监      | 8500   | 2002-09-12   | 1          | 3        |
| 8  | 周芷若 | 19  | 会计          | 48000  | 2006-06-02   | 7          | 3        |
| 9  | 丁敏君 | 23  | 出纳          | 5250   | 2009-05-13   | 7          | 3        |
| 10 | 赵敏   | 20  | 市场部总监    | 12500  | 2004-10-12   | 1          | 2        |
| 11 | 鹿杖客 | 56  | 职员          | 3750   | 2006-10-03   | 10         | 2        |
| 12 | 鹤笔翁 | 19  | 职员          | 3750   | 2007-05-09   | 10         | 2        |
| 13 | 方东白 | 19  | 职员          | 5500   | 2009-02-12   | 10         | 2        |
| 14 | 张三丰 | 88  | 销售总监      | 14000  | 2004-10-12   | 1          | 4        |
| 15 | 俞莲舟 | 38  | 销售          | 4600   | 2004-10-12   | 14         | 4        |
| 16 | 宋远桥 | 40  | 销售          | 4600   | 2004-10-12   | 14         | 4        |
| 17 | 陈友谅 | 42  | NULL           | 2000   | 2011-10-12   | 1          | NULL     |

### 部门表 dept:
| id | name  |
|----|--------|
| 1  | 研发部 |
| 2  | 市场部 |
| 3  | 财务部 |
| 4  | 行政部 |
| 5  | 运营部 |

### 薪资等级表salgrade
| grade | losal | hisal |
|--------|--------|--------|
| 1 | 0 | 3000 |
| 2 | 3001 | 5000 |
| 3 | 5001 | 8000 |
| 4 | 8001 | 10000 |
| 5 | 10001 | 15000 |
| 6 | 15001 | 20000 |
| 7 | 20001 | 25000 |
| 8 | 25001 | 30000 |



## 多表查询的本质
简单来说就是**在多张表的笛卡尔积基础上，通过连接条件（通常是主键与外键的关联）筛选出满足条件的元组，并选取所需的列信息。**
在关系型数据库（如 MySQL）中，每一张表都可以看成一个集合，那么多张表联系在一起就是一个笛卡尔积，如果有两张表你去执行
```sql
select * from emp,dept ;
```
根据上面的表格你会发现会查询出来17(emp的元组个数)*5(部门的元组个数之积)而这么多元组满足笛卡尔积的公式接下来我引用的集合概念并不是两张表的单独部分的关系而是他们笛卡尔积的关系，接下来我会详尽的展开讲述具体的分类

## 内连接
本质：**查询a表和b表组合的笛卡尔积当中交集中的部分数据**  
那么首先列出基本的MySQL代码：
```sql
-- 隐式内连接(基本语法)
SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件

-- 显示内连接
SELECT 字段列表 FROM 表1 RIGHT[OUTER]JOIN 表2 ON 条件
```

假如我有一个需求：.查询每一个员工的姓名，及其关联的部门的名称，这个时候注意到部门名称和姓名在不同的表格当中，而唯一关联这两个表的是emp表里面的dept_id和部门表里面的id。也就是说通过这个条件筛选出合理的



